# 端口使用说明

## ✅ 端口不会互斥

**好消息：你的图片检测工具不会和其他本地服务冲突！**

每个服务使用不同的端口，就像不同的门牌号，可以同时运行。

## 📊 当前端口使用情况

根据扫描结果：

| 端口 | 状态 | 使用程序 | 说明 |
|------|------|----------|------|
| 3000 | 🔴 已占用 | Node.js | React/Node.js 开发服务器 |
| **5000** | 🔴 已占用 | **Python（本工具）** | **图片检测工具** |
| 8080 | 🔴 已占用 | WeChat | 微信占用 |
| 3306 | 🟢 空闲 | - | MySQL 默认端口 |
| 5432 | 🟢 空闲 | - | PostgreSQL 默认端口 |
| 6379 | 🟢 空闲 | - | Redis 默认端口 |
| 8000 | 🟢 空闲 | - | Django 常用端口 |
| 9000 | 🟢 空闲 | - | PHP-FPM 常用端口 |

## 🎯 结论

**你的图片检测工具（5000端口）可以和以下服务同时运行：**

- ✅ Node.js 项目（3000端口）
- ✅ 微信（8080端口）
- ✅ 任何使用其他端口的服务

**完全不会互相干扰！**

## 🔧 如果遇到端口冲突

### 情况1：5000 端口被其他程序占用

**解决方案一：更改本工具的端口**

可用的替代端口：5001, 5002, 5003, 5555, 8000, 8888, 9000

修改方法：
```bash
# 1. 编辑配置文件
nano web_validator.py

# 2. 找到最后一行，修改端口号
app.run(host='127.0.0.1', port=5001, debug=True)  # 改为 5001

# 3. 保存后重新启动
./start_server.sh
```

访问地址也会相应改变：http://localhost:5001

**解决方案二：停止占用 5000 端口的其他程序**

```bash
# 使用端口管理工具
python3 port_manager.py kill 5000

# 或手动查找并停止
lsof -ti :5000 | xargs kill
```

## 🛠️ 使用端口管理工具

项目中已包含 `port_manager.py` 工具，可以方便地管理端口：

### 检查端口占用
```bash
python3 port_manager.py check 5000
```

### 扫描常用端口
```bash
python3 port_manager.py scan
```

### 获取可用端口建议
```bash
python3 port_manager.py suggest
```

### 停止占用端口的进程
```bash
python3 port_manager.py kill 5000
```

### 完整检查（推荐）
```bash
python3 port_manager.py
```

## 💡 最佳实践

### 开发环境端口分配建议

| 服务类型 | 建议端口 | 说明 |
|---------|---------|------|
| 前端开发服务器 | 3000-3999 | React, Vue, Angular 等 |
| 后端 API 服务 | 5000-5999 | Flask, Express 等 |
| 数据库服务 | 3306, 5432, 6379 | MySQL, PostgreSQL, Redis |
| Web 服务器 | 8000-8999 | Django, Tomcat 等 |

### 避免冲突的技巧

1. **记录端口使用情况**
   - 建议创建一个文档记录每个项目使用的端口
   - 避免多个项目使用相同端口

2. **使用端口管理工具**
   - 定期运行 `python3 port_manager.py scan` 检查
   - 了解当前哪些端口被占用

3. **项目独立端口**
   - 每个项目使用独特的端口号
   - 避免使用系统常用端口（1-1024）

## 📱 多设备访问

### 只在本机访问（默认，更安全）
```python
app.run(host='127.0.0.1', port=5000, debug=True)
```
访问：http://localhost:5000

### 允许局域网访问
```python
app.run(host='0.0.0.0', port=5000, debug=True)
```
访问：http://本机IP:5000（例如：http://192.168.1.100:5000）

查看本机 IP：
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

## ❓ 常见问题

### Q: 我能同时运行多个 Web 项目吗？
**A: 可以！** 只要它们使用不同的端口。例如：
- 项目A: http://localhost:3000
- 项目B: http://localhost:5000 (本工具)
- 项目C: http://localhost:8000

### Q: 5000 端口冲突了怎么办？
**A: 两个方案：**
1. 修改本工具的端口为 5001 或其他空闲端口
2. 停止占用 5000 端口的其他程序

### Q: 如何查看某个端口被谁占用？
**A: 使用命令：**
```bash
lsof -i :5000
```
或使用端口管理工具：
```bash
python3 port_manager.py check 5000
```

### Q: 端口冲突会导致数据丢失吗？
**A: 不会！** 端口冲突只会导致服务无法启动，不会影响已有数据。

## 🎯 总结

✅ **你的图片检测工具（5000端口）可以和其他服务和平共处**

✅ **不同端口之间互不干扰**

✅ **如果遇到端口冲突，轻松更换端口即可**

✅ **使用提供的端口管理工具，轻松管理所有端口**

---

**建议：** 将本工具固定使用 5000 端口，除非该端口被其他重要服务占用。
