# 批量上传能力说明

## 📊 当前限制

### 技术限制
| 限制项 | 数值 | 说明 |
|--------|------|------|
| **表格文件大小** | 16 MB | 这是上传表格文件本身的大小限制 |
| **图片数量** | 理论无上限 | 取决于表格文件大小 |
| **CSV格式** | ~160,000 行 | 基于16MB文件大小 |
| **Excel格式** | ~330,000 行 | Excel有压缩，可以存更多 |
| **单张图片超时** | 10 秒 | 下载单张图片的最长等待时间 |

### 实际建议

#### 🎯 推荐批量大小

| 批量大小 | 预计时间 | 适用场景 |
|---------|---------|---------|
| **50-100 张** | 1-2 分钟 | 日常使用，快速验证 |
| **100-500 张** | 2-10 分钟 | 常规批量检测 |
| **500-1000 张** | 10-20 分钟 | 大批量处理 |
| **1000+ 张** | 20+ 分钟 | 建议分批处理 |

#### ⚡ 为什么要限制批量大小？

**本地版本**：
- ✅ 技术上可以处理几十万张
- ⚠️ 但浏览器可能会因为长时间等待而超时
- ⚠️ 大量结果可能导致页面卡顿

**在线版本（Vercel）**：
- ⚠️ Serverless函数有执行时间限制（通常10-30秒）
- ⚠️ 建议单次不超过20-30张

## 💡 最佳实践

### 小批量（推荐）
```
✅ 50-200 张/次
• 处理速度快
• 出错容易定位
• 浏览器响应流畅
```

### 中批量
```
⚠️ 200-500 张/次
• 需要一定等待时间
• 建议保持浏览器窗口打开
• 检查网络连接稳定性
```

### 大批量
```
❌ 500+ 张/次（不推荐）
• 等待时间很长
• 浏览器可能超时
• 建议分批处理
```

## 🔧 如何分批处理

### 方法1: Excel分批
```
1. 打开你的大表格
2. 每500行另存为一个新文件
   - batch_part1.xlsx (第1-500行)
   - batch_part2.xlsx (第501-1000行)
   - batch_part3.xlsx (第1001-1500行)
3. 分批上传检测
4. 汇总结果
```

### 方法2: 使用Excel公式分批
```excel
# 在A列添加批次号
=INT((ROW()-2)/500)+1

# 然后按批次号筛选并分别导出
```

## 🚀 优化建议

### 对于大批量需求

如果你经常需要检测 **1000+ 张图片**，我可以为你：

1. **添加进度显示**
   - 实时显示已检测数量
   - 显示预计剩余时间
   - 失败自动重试机制

2. **分批自动处理**
   - 自动将大表格分成多批
   - 每批100张，逐批处理
   - 自动汇总所有结果

3. **导出功能**
   - 导出检测报告为Excel
   - 包含详细的检测结果
   - 方便后续分析

4. **命令行版本**
   - 适合超大批量
   - 可后台运行
   - 不受浏览器限制

## 📊 当前性能

### 测试场景
- **本地版本**: 100张图片，实测约2-3分钟
- **图片大小**: 平均300KB
- **网络速度**: 正常家庭宽带

### 性能因素
1. **网络速度**: 下载图片的速度
2. **图片大小**: 大图片下载慢
3. **服务器响应**: 图片服务器的速度
4. **电脑性能**: 影响图片处理速度

## ✅ 现在可以做什么

### 测试当前能力
```bash
# 创建一个包含100个URL的测试文件
cd "/Users/sxsheng/Documents/代码/图片边界验收工具"
python3 create_large_test.py
```

### 实际使用建议
1. **首次使用**: 从20-50张开始测试
2. **熟悉后**: 可以增加到100-200张
3. **大批量**: 分批处理，每批200-500张

## 📞 需要帮助？

如果你需要：
- ✅ 处理超大批量（1000+张）
- ✅ 添加进度显示
- ✅ 自动分批处理
- ✅ 导出检测报告

请告诉我你的具体需求，我可以为你优化工具！

---

**当前版本**: v2.0
**建议批量**: 100-500 张/次
**技术上限**: 理论上可达33万张（受表格大小限制）
